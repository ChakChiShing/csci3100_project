{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport resolveAssetSource from 'react-native/Libraries/Image/resolveAssetSource';\nvar cache = new Map();\n\nvar getImageSizeFromCache = function getImageSizeFromCache(image) {\n  if (typeof image === 'number') {\n    return cache.get(image);\n  } else {\n    return cache.get(image.uri);\n  }\n};\n\nvar loadImageSize = function loadImageSize(image) {\n  return new Promise(function (resolve, reject) {\n    if (typeof image === 'number') {\n      var _resolveAssetSource = resolveAssetSource(image),\n          width = _resolveAssetSource.width,\n          height = _resolveAssetSource.height;\n\n      resolve({\n        width: width,\n        height: height\n      });\n    } else {\n      Image.getSize(image.uri, function (width, height) {\n        resolve({\n          width: width,\n          height: height\n        });\n      }, reject);\n    }\n  });\n};\n\nexport var getImageSizeFitWidthFromCache = function getImageSizeFitWidthFromCache(image, toWidth, maxHeight) {\n  var size = getImageSizeFromCache(image);\n\n  if (size) {\n    var width = size.width,\n        height = size.height;\n    if (!width || !height) return {\n      width: 0,\n      height: 0\n    };\n    var scaledHeight = toWidth * height / width;\n    return {\n      width: toWidth,\n      height: scaledHeight > maxHeight ? maxHeight : scaledHeight\n    };\n  }\n\n  return {};\n};\n\nvar getImageSizeMaybeFromCache = function getImageSizeMaybeFromCache(image) {\n  var size;\n  return _regeneratorRuntime.async(function getImageSizeMaybeFromCache$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          size = getImageSizeFromCache(image);\n\n          if (size) {\n            _context.next = 6;\n            break;\n          }\n\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(loadImageSize(image));\n\n        case 4:\n          size = _context.sent;\n\n          if (typeof image === 'number') {\n            cache.set(image, size);\n          } else {\n            cache.set(image.uri, size);\n          }\n\n        case 6:\n          return _context.abrupt(\"return\", size);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport var getImageSizeFitWidth = function getImageSizeFitWidth(image, toWidth, maxHeight) {\n  var _await$getImageSizeMa, width, height, scaledHeight;\n\n  return _regeneratorRuntime.async(function getImageSizeFitWidth$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(getImageSizeMaybeFromCache(image));\n\n        case 2:\n          _await$getImageSizeMa = _context2.sent;\n          width = _await$getImageSizeMa.width;\n          height = _await$getImageSizeMa.height;\n\n          if (!(!width || !height)) {\n            _context2.next = 7;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", {\n            width: 0,\n            height: 0\n          });\n\n        case 7:\n          scaledHeight = toWidth * height / width;\n          return _context2.abrupt(\"return\", {\n            width: toWidth,\n            height: scaledHeight > maxHeight ? maxHeight : scaledHeight\n          });\n\n        case 9:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["/Users/apple/Desktop/M.Hero/project/csci3100_project/node_modules/react-native-auto-height-image/cache.js"],"names":["resolveAssetSource","cache","Map","getImageSizeFromCache","image","get","uri","loadImageSize","Promise","resolve","reject","width","height","Image","getSize","getImageSizeFitWidthFromCache","toWidth","maxHeight","size","scaledHeight","getImageSizeMaybeFromCache","set","getImageSizeFitWidth"],"mappings":"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","sourcesContent":["/**\n * @since 2017-04-24 20:50:41\n * @author vivaxy\n */\n\nimport { Image } from 'react-native';\n// undocumented but part of react-native; see\n// https://github.com/facebook/react-native/issues/5603#issuecomment-297959695\nimport resolveAssetSource from 'react-native/Libraries/Image/resolveAssetSource';\n\n/**\n * store with\n *  key: image\n *  value: {\n *      width: 100,\n *      height: 100,\n *  }\n */\nconst cache = new Map();\n\nconst getImageSizeFromCache = (image) => {\n  if (typeof image === 'number') {\n    return cache.get(image);\n  } else {\n    return cache.get(image.uri);\n  }\n};\n\nconst loadImageSize = (image) => {\n  return new Promise((resolve, reject) => {\n    //number indicates import X or require(X) was used (i.e. local file)\n    if (typeof image === 'number') {\n      const { width, height } = resolveAssetSource(image);\n      resolve({ width, height });\n    } else {\n      Image.getSize(\n        image.uri,\n        (width, height) => {\n          // success\n          resolve({ width, height });\n        },\n        reject\n      );\n    }\n  });\n};\n\nexport const getImageSizeFitWidthFromCache = (image, toWidth, maxHeight) => {\n  const size = getImageSizeFromCache(image);\n  if (size) {\n    const { width, height } = size;\n    if (!width || !height) return { width: 0, height: 0 };\n    const scaledHeight = (toWidth * height) / width;\n    return {\n      width: toWidth,\n      height: scaledHeight > maxHeight ? maxHeight : scaledHeight\n    };\n  }\n  return {};\n};\n\nconst getImageSizeMaybeFromCache = async (image) => {\n  let size = getImageSizeFromCache(image);\n  if (!size) {\n    size = await loadImageSize(image);\n    if (typeof image === 'number') {\n      cache.set(image, size);\n    } else {\n      cache.set(image.uri, size);\n    }\n  }\n  return size;\n};\n\nexport const getImageSizeFitWidth = async (image, toWidth, maxHeight) => {\n  const { width, height } = await getImageSizeMaybeFromCache(image);\n  if (!width || !height) return { width: 0, height: 0 };\n  const scaledHeight = (toWidth * height) / width;\n  return {\n    width: toWidth,\n    height: scaledHeight > maxHeight ? maxHeight : scaledHeight\n  };\n};\n"]},"metadata":{},"sourceType":"module"}